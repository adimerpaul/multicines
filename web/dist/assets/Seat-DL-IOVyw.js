import{_,c as l,a as s,t as c,F as h,r as g,o as d,b as u}from"./index-C1ppxyxZ.js";const v="/assets/images/movie/screen-thumb.png",b={name:"Seat",data(){return{sala:{},programa:{price:{precio:0},movie:{}},seat:[],seleccionados:[],letrasFilas:[]}},computed:{columnasInversas(){const e=parseInt(this.sala.columnas)||0;return Array.from({length:e},(t,a)=>e-a)},whatsappLink(){var a,i,o,n;const e=`*Reserva de Entradas*
PelÃ­cula: ${(a=this.programa.movie)==null?void 0:a.nombre} (${(i=this.programa.movie)==null?void 0:i.formato})
Hora: ${(o=this.programa.horaInicio)==null?void 0:o.substring(0,16)}
Asientos: ${this.seleccionados.join(", ")}
Total: ${this.seleccionados.length*((n=this.programa.price)==null?void 0:n.precio)} Bs.

Por favor, confirmar disponibilidad.`;return`https://wa.me/59169603027?text=${encodeURIComponent(e)}`}},mounted(){this.seatGet()},methods:{showLibre(e,t){const a=this.seat.find(i=>i.letra===e&&i.columna===t);return a&&a.activo==="LIBRE"},seatGet(){this.$axios.post("mySeats",{id:this.$route.params.id}).then(e=>{this.sala=e.data.sala,this.programa=e.data.programa,this.seat=e.data.seat,this.letrasFilas=[...new Set(this.seat.map(t=>t.letra))]}).catch(e=>{console.error("Error fetching seat data:",e)})},getSeatImage(e,t){const a=this.seat.find(i=>i.letra===e&&i.columna===t);if(!a)return"/assets/images/movie/seat01.png";switch(a.activo){case"LIBRE":return this.seleccionados.includes(`${e}${t}`)?"/assets/images/movie/seat01-selected.png":"/assets/images/movie/seat01.png";case"OCUPADO":return"/assets/images/movie/seat01-ocupado.png";case"RESERVADO":return"/assets/images/movie/seat01-reserved.png";case"INACTIVO":default:return"/assets/images/movie/seat01-disabled.png"}},toggleSeat(e,t){const a=`${e}${t}`,i=this.seat.find(n=>n.letra===e&&n.columna===t);if(!i||i.activo!=="LIBRE")return;const o=this.seleccionados.indexOf(a);o>=0?this.seleccionados.splice(o,1):this.seleccionados.push(a)}}},f={class:"seat-plan-section padding-bottom padding-top"},k={class:"container"},I={class:"screen-area"},S={class:"screen"},w={class:"subtitle"},x={class:"screen-wrapper"},y={class:"seat-area"},B={class:"seat--area"},E=["onClick"],L=["src"],R={key:0,class:"sit-num"},A={class:"proceed-book bg_img","data-background":"/assets/images/movie/movie-bg-proceed.jpg"},C={class:"proceed-to-book"},$={class:"book-item"},F={class:"title"},O={class:"book-item",style:{"padding-left":"10px"}},j={class:"title"},V={class:"book-item"},D={class:"book-item"},N=["href"];function P(e,t,a,i,o,n){var p;return d(),l("div",f,[s("div",k,[s("div",I,[s("h4",S,c(o.sala.nombre),1),t[0]||(t[0]=s("div",{class:"screen-thumb"},[s("img",{src:v,alt:"movie"})],-1)),s("h5",w,c(o.programa.movie.nombre)+" "+c(o.programa.movie.formato),1),s("div",x,[s("ul",y,[(d(!0),l(h,null,g(o.letrasFilas,r=>(d(),l("li",{key:r,class:"seat-line"},[s("span",null,c(r),1),s("ul",B,[(d(!0),l(h,null,g(n.columnasInversas,m=>(d(),l("li",{key:r+m,class:"single-seat",onClick:T=>n.toggleSeat(r,m)},[s("img",{src:n.getSeatImage(r,m),alt:"seat"},null,8,L),n.showLibre(r,m)?(d(),l("span",R,c(r+m),1)):u("",!0)],8,E))),128))]),s("span",null,c(r),1)]))),128))])])]),s("div",A,[s("div",C,[s("div",$,[t[1]||(t[1]=s("span",null,"Has elegido:",-1)),s("h3",F,c(o.seleccionados.join(", ")),1)]),s("div",O,[t[2]||(t[2]=s("span",null,"Total a pagar",-1)),s("h3",j,c(o.seleccionados.length*((p=o.programa.price)==null?void 0:p.precio))+" Bs",1)]),s("div",V,[s("div",D,[s("a",{href:n.whatsappLink,target:"_blank",class:"custom-button"}," Reservar por WhatsApp ",8,N)])])])])])])}const H=_(b,[["render",P]]);export{H as default};
